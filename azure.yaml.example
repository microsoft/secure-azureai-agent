# Azure Developer CLI çµ±åˆã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³è¨­å®š
name: secure-azureai-agent-unified
metadata:
  template: secure-azureai-agent-unified@0.0.1-beta

services:
  # çµ±åˆã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚µãƒ¼ãƒ“ã‚¹
  unified-app:
    project: .
    host: appservice
    language: python
    
    # Azure App Service è¨­å®š
    config:
      # Python è¨­å®š
      pythonVersion: "3.12"
      
      # ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³è¨­å®š
      appSettings:
        ENVIRONMENT: "production"
        CHAINLIT_PORT: "8501"
        WEBSITES_PORT: "8000"
        PYTHONPATH: "/home/site/wwwroot/backend/src"
        SCM_DO_BUILD_DURING_DEPLOYMENT: "true"
        ENABLE_ORYX_BUILD: "true"
        
      # èµ·å‹•è¨­å®š
      startupCommand: "bash startup.sh"
      
      # ãƒªã‚½ãƒ¼ã‚¹è¨­å®š
      sku: B1  # Basic tier ã§ååˆ†
      
hooks:
  # ãƒ‡ãƒ—ãƒ­ã‚¤å‰å‡¦ç†
  predeploy:
    - echo "ğŸ“¦ Preparing unified application deployment"
    
  # ãƒ‡ãƒ—ãƒ­ã‚¤å¾Œå‡¦ç†  
  postdeploy:
    - echo "âœ… Unified application deployed successfully"